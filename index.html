<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Merry Merry Christmas Floriane</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <style>
    :root{
      /* ===== 换背景图只改这里 ===== */
    --bg-url:url(bg.jpg); 
      /* ========================== */
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      background:#000;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
      color:#fff;
      overflow:hidden;
      position:relative;
    }
    /* 背景占位 */
    .bg{
      position:absolute;
      left:0;top:0;width:100%;height:100%;
      background:var(--bg-url) center/cover no-repeat;
      filter:brightness(0.6);
      z-index:-2;
    }
    h1{font-size:1.5rem;margin-bottom:.5rem;text-align:center;letter-spacing:1px}

    /* 按钮区域 */
    .ctrl{margin-bottom:1rem}
    button{
      padding:0.7rem 1.8rem;
      font-size:1.1rem;
      border:none;
      border-radius:30px;
      background:rgba(214,40,40,.85);
      color:#fff;
      cursor:pointer;
      box-shadow:0 4px 15px rgba(214,40,40,.45);
      transition:background .2s;
    }
    button:hover{background:#b71c1c}
    button:active{transform:scale(.95)}

    /* 歌词面板 */
    #panel{
      width:90vw;
      max-width:400px;
      height:46vh;
      background:rgba(0,0,0,.45);
      border-radius:12px;
      padding:1.2rem 1rem;
      overflow:hidden;
      position:relative;
    }
    #lyrics{
      position:absolute;
      left:0;right:0;
      transition:transform .3s ease-out;
      text-align:center;
      font-size:1.05rem;
      line-height:1.9;
      white-space:pre-line;
      color:#ffe9d6;
    }
    /* 当前行高亮 */
    .active{color:#fff;font-weight:700;text-shadow:0 0 4px #fff}

    /* 简单雪 */
    .snow{position:absolute;top:-10px;background:#fff;border-radius:50%;opacity:.8;animation:fall linear infinite}
    @keyframes fall{to{transform:translateY(100vh) rotate(360deg)}}
  </style>
</head>
<body>
  <div class="bg"></div>
  <h1>Merry Merry Christmas Floriane</h1>

  <div class="ctrl">
    <button id="playPauseBtn">▶ PLAY</button>
  </div>

  <audio id="song" src="Merry Merry Christmas Floriane.mp3"></audio>

  <div id="panel">
    <div id="lyrics"></div>
  </div>

  <script>
    /* ====== 时间轴（秒 : 歌词） 总105s ====== */
    const lrc=[

      {t:8,txt:"Snowflakes fall on the window"},
      {t:13,txt:"Candlelight in your eyes"},
      {t:18 ,txt:"Laughter spills in the kitchen"},
      {t:21,txt:"Cookies baking"},
      {t:24,txt:"Time flies"},

      {t:27,txt:"Merry Merry Christmas Floriane"},
      {t:31,txt:"Sing it loud"},
      {t:33,txt:"Sing it again"},
      {t:36 ,txt:"Merry Merry Christmas Floriane"},
      {t:40,txt:"Fill the room with joy"},
      {t:43,txt:"Amen"},
      {t:46,txt:"Merry Merry Christmas Floriane"},
      {t:50,txt:"This is your song"},
      {t:54,txt:"My friend"},

      {t:55,txt:"Paper stars on the ceiling"},
      {t:60,txt:"Little gifts by the tree"},
      {t:65,txt:"All the love in the living room"},
      {t:69,txt:"Feels like home"},
      {t:71,txt:"Feels so free"},

      {t:74,txt:"Merry Merry Christmas Floriane"},
      {t:78,txt:"One more time"},
      {t:82,txt:"All the way"},
      {t:84,txt:"Merry Merry Christmas Floriane"},
      {t:89,txt:"Carry this smile through every day"},
    
      {t:94,txt:"Merry Merry Christmas Floriane"},
      {t:99,txt:"This is the song my friend"},
    ];

    const audio=document.getElementById('song');
    const btn=document.getElementById('playPauseBtn');
    const lyricsBox=document.getElementById('lyrics');
    const panel=document.getElementById('panel');

    /* 初始化歌词 */
    lrc.forEach((o,i)=>{
      const p=document.createElement('p');
      p.textContent=o.txt;
      p.id='lrc'+i;
      lyricsBox.appendChild(p);
    });

    let cur=0;
    function scrollTo(idx){
      const target=document.getElementById('lrc'+idx);
      if(!target)return;
      /* 高亮切换 */
      lyricsBox.querySelectorAll('p').forEach(p=>p.classList.remove('active'));
      target.classList.add('active');
      /* 居中滚动 */
      const panelH=panel.clientHeight;
      const targetTop=target.offsetTop;
      const offset=targetTop-panelH/2+target.clientHeight/2;
      lyricsBox.style.transform=`translateY(${-offset}px)`;
    }

    /* 播放/暂停 */
    btn.addEventListener('click',()=>{
      if(audio.paused){
        audio.play();
        btn.textContent='❚❚ Pause';
        requestAnimationFrame(updateLrc);
      }else{
        audio.pause();
        btn.textContent='▶ PLAY';
      }
    });

    /* 逐帧更新歌词 */
    function updateLrc(){
      if(audio.paused)return;
      const t=audio.currentTime;
      /* 找当前行 */
      let i=lrc.length-1;
      while(i>0&&lrc[i].t>t)i--;
      if(i!==cur){cur=i; scrollTo(i);}
      requestAnimationFrame(updateLrc);
    }

    /* 结束重置 */
    audio.addEventListener('ended',()=>{
      btn.textContent='▶ Play';
      cur=0; scrollTo(0);
    });

    /* 简单雪 */
    setInterval(()=>{
      const s=document.createElement('div');
      s.className='snow';
      s.style.left=Math.random()*100+'%';
      s.style.width=s.style.height=Math.random()*4+2+'px';
      s.style.animationDuration=Math.random()*4+3+'s';
      document.body.appendChild(s);
      setTimeout(()=>s.remove(),7000);
    },150);
  </script>
</body>
</html>
